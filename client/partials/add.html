<h1>Add a Minion</h1>
<p>
    In order to cut down on duplication, there is a list of requested mooks (highest priority at the top), and what
    book you can find them in. You will need to request a mook you're going to add, and it will temporarily be
    removed from the list (for one hour). It <i>is</i> possible to add mooks not in the list, but the ones listed are
    higher priority.
</p>

<h2>Requested</h2>
<div class="well" style="height: 300px">
    <ol>
        <li ng-repeat="item in requested | filter:{locked: false} | orderBy:'name'">{{ item.name }} - <i>{{ item.book }}, pg {{ item.page }}</i></li>
    </ol>
</div>

<h2>Add/Edit</h2>
<p>To add or edit a mook, please enter the name of the mook in the box below, and click 'Start'.</p>
<p><small><i>Note: If the timer runs out while you're still editing, please just click 'Start' again.</i></small></p>
<div class="row">
    <label class="control-label col-xs-2">Name</label>
    <div class="col-xs-6">
        <input type="text" class="form-control" ng-model="mook.name" typeahead="mook.name for mook in requested | filter:$viewValue | limitTo:8" ng-disabled="mook.locked">
    </div>
    <div class="col-xs-4">
        <button class="btn btn-block btn-primary" ng-click="lockMook()" ng-disabled="mook.locked">
            <span ng-if="!mook.locked"><i class="fa fa-flag"></i> Start</span>
            <span ng-if="mook.locked">{{ timer.remainingMS() | date: 'mm:ss' }}</span>
        </button>
    </div>
</div>
<hr>

<div id="mook-form" ng-show="mook.locked || mook.type">
    <a id="form"></a>
    <div class="form-group">
        <label for="type" class="col-sm-2 control-label">Type</label>
        <div class="col-sm-5">
            <input type="text" class="form-control" id="type" placeholder="Medium Human" ng-model="mook.type">
        </div>
        <label for="cl" class="col-sm-2 control-label">CL</label>
        <div class="col-sm-3">
            <input type="number" class="form-control" id="cl" placeholder="CL" ng-model="mook.cl">
        </div>
    </div>
    <div class="form-group">
        <label for="destiny" class="col-sm-2 control-label">Destiny</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="destiny" placeholder="0" ng-model="mook.destiny">
        </div>
        <label for="force" class="col-sm-2 control-label">Force</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="force" placeholder="0" ng-model="mook.force">
        </div>
        <label for="darkside" class="col-sm-2 control-label">Darkside</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="darkside" placeholder="0" ng-model="mook.darkside">
        </div>
    </div>
    <div class="form-group">
        <label for="languages" class="col-sm-2 control-label">Languages</label>
        <div class="col-sm-4">
            <input type="text" class="form-control" id="languages" placeholder="Basic" ng-model="mook.languages">
        </div>
        <label for="senses" class="col-sm-2 control-label">Senses</label>
        <div class="col-sm-4">
            <input type="text" class="form-control" id="senses" placeholder="" ng-model="mook.senses">
        </div>
    </div>
    <div class="form-group">
        <label for="initiative" class="col-sm-2 control-label">Initiative</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="initiative" placeholder="0" ng-model="mook.initiative">
        </div>
        <label for="baseAttack" class="col-sm-2 control-label">Base Attack</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="baseAttack" placeholder="0" ng-model="mook.baseAttack">
        </div>
        <label for="grapple" class="col-sm-2 control-label">Grapple (Grp)</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="grapple" placeholder="0" ng-model="mook.grapple">
        </div>
    </div>
    <div class="form-group">
        <label for="ref" class="col-sm-2 control-label">Reflex (ref)</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="ref" placeholder="0" ng-model="mook.ref">
        </div>
        <label for="fort" class="col-sm-2 control-label">Fortitude (fort)</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="fort" placeholder="0" ng-model="mook.fort">
        </div>
        <label for="will" class="col-sm-2 control-label">Will (will)</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="will" placeholder="0" ng-model="mook.will">
        </div>
    </div>
    <div class="form-group">
        <label for="hp" class="col-sm-2 control-label">HitPoints (hp)</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="hp" placeholder="0" ng-model="mook.hp">
        </div>
        <label for="threshold" class="col-sm-2 control-label">Threshold</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="threshold" placeholder="0" ng-model="mook.threshold">
        </div>
        <label for="speed" class="col-sm-2 control-label">Speed</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="speed" placeholder="0" ng-model="mook.speed">
        </div>
    </div>
    <hr>
    <div class="form-group">
        <label for="strength" class="col-sm-2 control-label">Strength (Str)</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="strength" placeholder="0" ng-model="mook.abilities.strength">
        </div>
        <label for="constitution" class="col-sm-2 control-label">Constitution (Con)</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="constitution" placeholder="0" ng-model="mook.abilities.constitution">
        </div>
        <label for="dexterity" class="col-sm-2 control-label">Dexterity (Dex)</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="dexterity" placeholder="0" ng-model="mook.abilities.dexterity">
        </div>
    </div>
    <div class="form-group">
        <label for="intelligence" class="col-sm-2 control-label">Intelligence (Int)</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="intelligence" placeholder="0" ng-model="mook.abilities.intelligence">
        </div>
        <label for="wisdom" class="col-sm-2 control-label">Wisdom (Wis)</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="wisdom" placeholder="0" ng-model="mook.abilities.wisdom">
        </div>
        <label for="charisma" class="col-sm-2 control-label">Charisma (Cha)</label>
        <div class="col-sm-2">
            <input type="number" class="form-control" id="charisma" placeholder="0" ng-model="mook.abilities.charisma">
        </div>
    </div>
    <hr>
    <!-- TODO: Attacks: { type: 'Melee' | 'Ranged', text: '...' } -->
    <kvp-list model="mook.attacks" name="Attacks" key="type" key-type="['Melee', 'Ranged']" value="text" value-type="textarea"></kvp-list>
    <div class="form-group">
        <label for="attackOptions" class="col-sm-2 control-label">Attack Options</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="attackOptions" placeholder="Acrobatic Strike, etc." ng-model="mook.attackOptions">
        </div>
    </div>
    <div class="form-group">
        <label for="specialActions" class="col-sm-2 control-label">Special Actions</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="specialActions" placeholder="Point Blank Shot, etc." ng-model="mook.specialActions">
        </div>
    </div>
    <kvp-list model="mook.feats" name="Feats" key="name" value="description" value-type="textarea" key-complete="autoFeat"></kvp-list>
    <kvp-list model="mook.talents" name="Talents" key="name" value="description" value-type="textarea" key-complete="autoTalent"></kvp-list>
    <kvp-list model="mook.skills" name="Skills" key="name" value="value" value-type="number"></kvp-list>
    <div class="form-group">
        <label for="possessions" class="col-sm-2 control-label">Possessions</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="possessions" placeholder="" ng-model="mook.possessions">
        </div>
    </div>
</div>
<div ng-show="mook.locked || mook.type">
    <hr/>
    <div class="row">
        <div class="col-sm-offset-6 col-sm-3">
            <button class="btn btn-primary btn-block" ng-click="saveMook()"><i class="fa fa-save"></i> Save</button>
        </div>
        <div class="col-sm-3">
            <button class="btn btn-default btn-block" ng-click="unlockMook()"><i class="fa fa-times"></i> Cancel</button>
        </div>
    </div>
</div>
<br/>
<br/>
<br/>
<br/>

<!--pre>{{ mook | json }}</pre-->